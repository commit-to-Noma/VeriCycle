<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verified Network - VeriCycle</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="dark-theme">
    <header class="navbar">
        <div class="container">
            <div class="brand">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="VeriCycle Logo" class="logo">
                <span class="logo-text">VeriCycle</span>
            </div>
            <nav>
                <a href="{{ url_for('collector_dashboard') }}" class="nav-button">Dashboard</a>
                <a href="{{ url_for('rewards') }}" class="nav-button">Rewards</a>
                <a href="{{ url_for('logout') }}" class="nav-button">Log Out</a>
            </nav>
        </div>
    </header>

    <main class="container app-dashboard">
        <div class="dashboard-header">
            <h2>Our Verified Network</h2>
            <p>We partner with trusted, registered centers to ensure your recycling is processed fairly.</p>
        </div>

        <div class="network-grid">

                    <div class="partner-card">
                        <div class="partner-card-image">
                            <img class="partner-card-bg" src="https://images.pexels.com/photos/2570304/pexels-photo-2570304.jpeg?auto=compress&cs=tinysrgb&h=1200&fit=crop" alt="Mpact Recycling background" onerror="this.onerror=null;this.src='/static/partners/mpact-bg.svg';">
                            <img src="https://mpactrecycling.co.za/templates/mr20/images/logo-mpact-recycling.svg" alt="Mpact Logo" class="partner-card-logo">
                        </div>
                        
                        <div class="partner-card-content">

                            <h3>Mpact Recycling</h3>
                            <p class="tagline">"PAUSE.SORT.RECYLE THAT."</p>
                            
                            <p><strong>Specializes in:</strong></p>
                            <ul class="specialties">
                                <li>Paper (Office Paper, Newspaper, Cardboard)</li>
                                <li>Plastics (PET, HDPE, LDPE, PP)</li>
                                <li>Metals (Cans) & Glass (Bottles)</li>
                            </ul>
                            
                            <div class="partner-card-info">
                                <p><strong>Contact:</strong> 0800 022 112 (Toll-Free)</p>
                                    <a href="#" class="location-link" data-modal-id="mpact-modal">
                                        üìç View All Locations
                                    </a>
                            </div>

                            <a href="https://www.mpact.co.za/our-businesses/recycling" target="_blank" class="btn-primary">Visit Website</a>
                        </div>
                    </div>

                    <div class="partner-card">
                        <div class="partner-card-image">
                            <img class="partner-card-bg" src="https://images.pexels.com/photos/761297/pexels-photo-761297.jpeg?auto=compress&cs=tinysrgb&h=1200&fit=crop" alt="FMSA background" onerror="this.onerror=null;this.src='/static/partners/fmsa-bg.svg';">
                            <img src="https://www.fmsa.co.za/wp-content/uploads/2019/04/FMSA-web-logo-dark.jpg" alt="FMSA Logo" class="partner-card-logo">
                        </div>
                        
                        <div class="partner-card-content">

                            <h3>FMSA Waste Management</h3>
                            <p class="tagline">"Lead the Scene and Keep it Green!"</p>

                            <p><strong>Specializes in:</strong></p>
                            <ul class="specialties">
                                <li>Cardboard, Paper & Plastics</li>
                                <li>Steel & Cans</li>
                                <li>E-waste & Hazardous Waste</li>
                            </ul>

                            <div class="partner-card-info">
                                <p><strong>Contact:</strong> +27 12 942 5276</p>
                                    <a href="#" class="location-link" data-modal-id="fmsa-modal">
                                        üìç View All Locations
                                    </a>
                            </div>

                            <a href="https://www.fmsa.co.za/" target="_blank" class="btn-primary">Visit Website</a>
                        </div>
                    </div>

                    <div class="partner-card">
                        <div class="partner-card-image">
                            <img class="partner-card-bg" src="https://images.pexels.com/photos/802221/pexels-photo-802221.jpeg?auto=compress&cs=tinysrgb&h=1200&fit=crop" alt="Roodepoort Recycling background" onerror="this.onerror=null;this.src='/static/partners/roodepoort-bg.svg';">
                            <img src="http://www.roodepoortrecycling.co.za/wp-content/uploads/2018/07/cropped-LETTERHEAD@300x-e1532005233566.png" alt="Roodepoort Recycling Logo" class="partner-card-logo">
                        </div>
                        
                        <div class="partner-card-content">
                            
                            <h3>Roodepoort Recycling</h3>
                            <p class="tagline">"Working towards a 'Zero Waste tomorrow'."</p>

                            <p><strong>Specializes in:</strong></p>
                            <ul class="specialties">
                                <li>Metals (Ferrous & Non-Ferrous)</li>
                                <li>All Plastics (PET, PVC, PP, etc.)</li>
                                <li>Glass (Bottles & Windscreens)</li>
                            </ul>
                            
                            <div class="partner-card-info">
                                <p><strong>Contact:</strong> +27 87 238 4581</p>
                                    <a href="#" class="location-link" data-modal-id="roodepoort-modal">
                                        üìç View Location
                                    </a>
                            </div>

                            <a href="http://www.roodepoortrecycling.co.za/" target="_blank" class="btn-primary">Visit Website</a>
                        </div>
                    </div>

                </div> 
            </main>

    <!-- Location modals -->
    <div class="modal-overlay location-modal" id="mpact-modal">
        <div class="card modal-content">
            <button class="modal-close js-close-modal">&times;</button>
            <h3>Mpact Recycling ‚Äî Branches & Offices</h3>

            <div class="location-list">
                <h4>Head Offices</h4>
                <ul>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=17+Brunel+Road,+Thulisa+Park,+Johannesburg" target="_blank">
                            <strong>Mpact Recycling Head Office (Thulisa Park):</strong> 17 Brunel Road, Thulisa Park, Johannesburg, Gauteng
                        </a>
                        <span class="loc-phone">Tel: 0800 022 112<br>Tel: 011 538-8600</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=18+James+Bright+Avenue,+Driehoek,+Germiston" target="_blank">
                            <strong>Mpact Recycling Germiston (Head Offices):</strong> 18 James Bright Avenue, Driehoek, Germiston, Gauteng
                        </a>
                        <span class="loc-phone">Tel: 0860 736 233<br>Tel: 011 873-6545</span>
                    </li>
                </ul>

                <h4>Gauteng ‚Äî Branches</h4>
                <ul>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=18+James+Bright+Avenue,+Driehoek,+Germiston" target="_blank">
                            <strong>Mpact Recycling Germiston:</strong> 18 James Bright Avenue, Driehoek, Germiston
                        </a>
                        <span class="loc-phone">Tel: 011 873 6545</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=126+Richards+Dr,+Midrand" target="_blank">
                            <strong>Mpact Recycling Midrand:</strong> 126 Richards Dr, Midrand
                        </a>
                        <span class="loc-phone">Tel: 011 315 8450<br>Fax: 086 520 3247</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=103+Barney+Simon+St,+Newtown" target="_blank">
                            <strong>Mpact Recycling Newtown:</strong> 103 Barney Simon St, Newtown
                        </a>
                        <span class="loc-phone">Tel: 011 873 6545</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=296+Edison+Street,+Pretoria+West,+Pretoria" target="_blank">
                            <strong>Mpact Recycling Pretoria West:</strong> 296 Edison Street, Pretoria West, Pretoria
                        </a>
                        <span class="loc-phone">Tel: 011 873 6545<br>Fax: 086 686 8710</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=12+Berta+Street,+Mostyn+Park,+Roodepoort" target="_blank">
                            <strong>Mpact Recycling Randburg (Mostyn Park):</strong> 12 Berta Street, Mostyn Park, Roodepoort
                        </a>
                        <span class="loc-phone">Tel: 011 873 6545</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=4+Main+Reef+Road,+Randfontein" target="_blank">
                            <strong>Mpact Recycling Randfontein:</strong> 4 Main Reef Road, Randfontein
                        </a>
                        <span class="loc-phone">Tel: 083 844 3112</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=S+Main+Reef+Rd,+New+Era,+Springs" target="_blank">
                            <strong>Mpact Springs (Central Distribution Centre):</strong> S Main Reef Rd, New Era, Springs, 1559
                        </a>
                        <span class="loc-phone">Tel: 011 360 4453<br>Fax: 011 613 4715</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=17+Brunel+Road,+Thulisa+Park,+Johannesburg" target="_blank">
                            <strong>Mpact Recycling Thulisa Park:</strong> 17 Brunel Road, Thulisa Park, Johannesburg
                        </a>
                        <span class="loc-phone">Tel: 011 538 8600<br>Fax: 011 613 4715</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=107+2nd+Ave,+Wynberg,+Sandton" target="_blank">
                            <strong>Mpact Recycling Wynberg:</strong> 107 2nd Ave, Wynberg, Sandton, 2090
                        </a>
                        <span class="loc-phone">Tel: 011 873 6545</span>
                    </li>
                </ul>

                <h4>Kwa-Zulu Natal</h4>
                <ul>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=15+Torvale+Crescent+%26+Phoenix+Rd,+KwaMashu" target="_blank">
                            <strong>Mpact Recycling Bridge City (KwaMashu):</strong> 15 Torvale Crescent & Phoenix Rd, KwaMashu Highway Open Space
                        </a>
                        <span class="loc-phone">Tel: 031 274 6600<br>Fax: 031 205 7077</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=8+Ceramic+Curve,+Alton,+Richards+Bay" target="_blank">
                            <strong>Mpact Recycling Richards Bay:</strong> 8 Ceramic Curve, Alton, Richards Bay
                        </a>
                        <span class="loc-phone">Tel: 035 751 1722<br>Fax: 035 751 1724</span>
                    </li>
                </ul>

                <h4>North West</h4>
                <ul>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=86+Zendeling+Street,+Rustenburg" target="_blank">
                            <strong>Mpact Recycling Rustenburg:</strong> 86 Zendeling Street, Rustenburg
                        </a>
                        <span class="loc-phone">Tel: 071 870 3753</span>
                    </li>
                </ul>

                <h4>Western Cape</h4>
                <ul>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=101+Bofors+Circle,+Epping,+Cape+Town" target="_blank">
                            <strong>Mpact Recycling Epping:</strong> 101 Bofors Circle, Epping, Cape Town
                        </a>
                        <span class="loc-phone">Tel: 021 534 5346</span>
                    </li>
                    <li>
                        <a class="loc-name-address" href="https://www.google.com/maps/search/?api=1&query=36+Glenhurst+Street,+Beaconvale,+Parow" target="_blank">
                            <strong>Mpact Recycling Parow:</strong> 36 Glenhurst Street, Beaconvale Parow, Cape Town
                        </a>
                        <span class="loc-phone">Tel: 021 931 5106</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="modal-overlay location-modal" id="fmsa-modal">
        <div class="card modal-content">
            <button class="modal-close js-close-modal">&times;</button>
            <h3>FMSA Waste Management Locations</h3>

            <div class="location-list">
                <h4>Gauteng</h4>
                <ul>
                    <li>
                        <a href="https://www.google.com/maps/search/?api=1&query=35+Sunrise+Ave,+Hazelwood,+Pretoria" target="_blank">
                            <strong>Hazelwood (Main Office):</strong> 35 Sunrise Ave, Hazelwood, Pretoria
                        </a>
                        <span>+27 12 942 5276</span>
                    </li>
                    <li>
                        <a href="https://www.google.com/maps/search/?api=1&query=89+Battery+St,+Waltloo,+Pretoria" target="_blank">
                            <strong>Waltloo (Buy-Back Centre):</strong> 89 Battery St, Waltloo, Pretoria
                        </a>
                        <span>+27 62 110 6221</span>
                    </li>
                    <li>
                        <a href="https://www.google.com/maps/search/?api=1&query=Brentwood+Park,+Benoni" target="_blank">
                            <strong>Brentwood Park (Buy-Back Centre):</strong> Brentwood Park, Benoni
                        </a>
                        <span>(N/A)</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="modal-overlay location-modal" id="roodepoort-modal">
        <div class="card modal-content">
            <button class="modal-close js-close-modal">&times;</button>
            <h3>Roodepoort Recycling Location</h3>

            <div class="location-list">
                <ul>
                    <li>
                        <a href="https://www.google.com/maps/search/?api=1&query=195+Miles+Stoker+Rd,+Roodepoort" target="_blank">
                            <strong>Roodepoort:</strong> 195 Miles Stoker Rd, Roodepoort
                        </a>
                        <span>+27 87 238 4581</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const locationLinks = document.querySelectorAll('.location-link');
        const closeButtons = document.querySelectorAll('.js-close-modal');
        const modals = document.querySelectorAll('.location-modal');

        console.debug('Modal script init - locationLinks:', locationLinks.length, 'modals:', modals.length);

        function closeAllModals() {
            modals.forEach(m => {
                m.style.display = 'none';
                m.setAttribute('aria-hidden', 'true');
            });
        }

        function openModalById(id) {
            try {
                console.debug('openModalById called with id:', id);
                if (!id) return console.warn('openModalById: no id provided');
                // Close any other open modals first
                closeAllModals();
                // Use getElementById (safe) and show
                const modal = document.getElementById(id);
                console.debug('modal lookup result for', id, modal);
                if (modal) {
                    modal.style.display = 'flex';
                    modal.setAttribute('aria-hidden', 'false');
                    // focus the close button for accessibility
                    const btn = modal.querySelector('.js-close-modal');
                    if (btn) btn.focus();
                } else {
                    console.error('openModalById: modal not found for id:', id);
                }
            } catch (err) {
                console.error('openModalById error', err);
            }
        }

        // Attach click to links
        locationLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const modalId = this.dataset.modalId && this.dataset.modalId.trim();
                console.debug('location link clicked, dataset modal id=', this.dataset.modalId, 'trimmed=', modalId);
                openModalById(modalId);
            });
        });

        // Close buttons
        closeButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                const modal = e.target.closest('.location-modal');
                if (modal) modal.style.display = 'none';
            });
        });

        // Click outside modal-content to close
        modals.forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Close on Esc
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeAllModals();
        });
    });
</script>

</body>
</html>